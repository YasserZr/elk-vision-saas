# ============================================
# PRODUCTION ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env.production and configure for production
# NEVER commit this file to version control with real secrets!

# ============================================
# Environment Configuration
# ============================================
# Environment: production, staging, development
ENVIRONMENT=production
BUILD_TARGET=production
NODE_ENV=production
DEBUG=False

# ============================================
# Domain & URLs
# ============================================
DOMAIN=yourdomain.com
PRODUCTION_DOMAIN=yourdomain.com
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,api.yourdomain.com

# Frontend URLs (use HTTPS in production)
NEXT_PUBLIC_API_URL=https://yourdomain.com/api
NEXT_PUBLIC_WS_URL=wss://yourdomain.com/ws
NEXT_PUBLIC_KIBANA_URL=https://yourdomain.com/kibana

# ============================================
# Django Security Settings
# ============================================
# Generate with: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=CHANGE_THIS_TO_A_SECURE_RANDOM_SECRET_KEY_50_CHARS_MIN

# CSRF trusted origins
CSRF_TRUSTED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Session settings
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
CSRF_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax
CSRF_COOKIE_SAMESITE=Lax

# Security headers
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True
SECURE_SSL_REDIRECT=True
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
X_FRAME_OPTIONS=DENY

# ============================================
# PostgreSQL Database
# ============================================
# Generate strong passwords: openssl rand -base64 32
POSTGRES_DB=elk_vision_prod
POSTGRES_USER=elk_admin
POSTGRES_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD_32_CHARS_MIN
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Connection pooling
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=10

# ============================================
# MongoDB
# ============================================
MONGO_DB_NAME=elk_vision_prod
MONGO_USER=elk_mongo_admin
MONGO_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD_32_CHARS_MIN
MONGO_HOST=mongodb
MONGO_PORT=27017

# MongoDB replica set (for production HA)
MONGO_REPLICA_SET=rs0
MONGO_REPLICA_SET_ENABLED=False

# Full connection string (alternative to individual params)
# MONGODB_URI=mongodb://elk_mongo_admin:password@mongodb:27017/elk_vision_prod?authSource=admin

# ============================================
# Redis Cache & Message Broker
# ============================================
REDIS_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD_32_CHARS_MIN
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# Redis connection URLs
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/0

# Redis configuration
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_KEEPALIVE=True
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================
# Elasticsearch
# ============================================
# Generate strong password: openssl rand -base64 32
ELASTICSEARCH_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD_32_CHARS_MIN
ELASTICSEARCH_HOST=elasticsearch:9200
ELASTICSEARCH_USER=elastic
ELASTICSEARCH_SCHEME=http

# Cluster settings
ELASTICSEARCH_CLUSTER_NAME=elk-vision-cluster
ELASTICSEARCH_NODE_NAME=node-1

# Memory settings (adjust based on available RAM)
ES_JAVA_OPTS=-Xms2g -Xmx2g

# Security
ELASTIC_SECURITY_ENABLED=true
ELASTICSEARCH_SSL_ENABLED=false

# ============================================
# Logstash
# ============================================
LOGSTASH_HOST=logstash
LOGSTASH_PORT=5000
LS_JAVA_OPTS=-Xms512m -Xmx512m

# ============================================
# Kibana
# ============================================
# Generate with: openssl rand -hex 32
KIBANA_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD_32_CHARS_MIN
KIBANA_ENCRYPTION_KEY=CHANGE_THIS_TO_A_64_CHAR_HEX_STRING_FOR_ENCRYPTION
KIBANA_HOST=kibana
KIBANA_PORT=5601

# ============================================
# Celery Configuration
# ============================================
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240
CELERY_BROKER_CONNECTION_RETRY_ON_STARTUP=True

# ============================================
# Email Configuration (SMTP)
# ============================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=noreply@yourdomain.com
EMAIL_HOST_PASSWORD=CHANGE_THIS_TO_YOUR_SMTP_APP_PASSWORD
DEFAULT_FROM_EMAIL=noreply@yourdomain.com
SERVER_EMAIL=errors@yourdomain.com

# ============================================
# AWS Configuration (if using S3 for storage)
# ============================================
USE_S3=False
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_STORAGE_BUCKET_NAME=elk-vision-prod
AWS_S3_REGION_NAME=us-east-1
AWS_S3_CUSTOM_DOMAIN=
AWS_DEFAULT_ACL=private

# ============================================
# Monitoring & Alerting
# ============================================
# Prometheus
PROMETHEUS_RETENTION_DAYS=30
PROMETHEUS_RETENTION_SIZE=10GB

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD
GRAFANA_SECRET_KEY=CHANGE_THIS_TO_A_RANDOM_SECRET_KEY

# Alertmanager - Slack
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_BOT_TOKEN=xoxb-your-slack-bot-token
SLACK_CHANNEL=#alerts

# Alertmanager - Email
SMTP_HOST=smtp.gmail.com:587
SMTP_USER=alerts@yourdomain.com
SMTP_PASSWORD=CHANGE_THIS_TO_SMTP_PASSWORD

# PagerDuty (optional)
PAGERDUTY_SERVICE_KEY=
PAGERDUTY_INTEGRATION_KEY=

# Sentry (Error tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================
# SSL/TLS Configuration
# ============================================
SSL_CERTIFICATE_EMAIL=admin@yourdomain.com
CERTBOT_EMAIL=admin@yourdomain.com

# SSL paths (for custom certificates)
SSL_CERT_PATH=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/yourdomain.com/privkey.pem

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# ============================================
# CORS Configuration
# ============================================
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOW_CREDENTIALS=True

# ============================================
# Backup Configuration
# ============================================
BACKUP_ENABLED=True
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=elk-vision-backups
BACKUP_SCHEDULE=0 2 * * *

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=INFO
DJANGO_LOG_LEVEL=INFO
CELERY_LOG_LEVEL=INFO
ELASTICSEARCH_LOG_LEVEL=WARN

# Log file paths
LOG_FILE_PATH=/var/log/elk-vision/app.log
ERROR_LOG_PATH=/var/log/elk-vision/error.log

# ============================================
# Application Versioning
# ============================================
APP_VERSION=1.0.0
GIT_COMMIT_SHA=

# ============================================
# Feature Flags
# ============================================
ENABLE_API_DOCS=False
ENABLE_DEBUG_TOOLBAR=False
ENABLE_SILK_PROFILER=False
ENABLE_REGISTRATION=True
ENABLE_PASSWORD_RESET=True

# ============================================
# JWT Configuration
# ============================================
# Generate with: openssl rand -base64 64
JWT_SECRET_KEY=CHANGE_THIS_TO_A_STRONG_SECRET_KEY_FOR_JWT
JWT_ACCESS_TOKEN_LIFETIME=300
JWT_REFRESH_TOKEN_LIFETIME=86400
JWT_ALGORITHM=HS256

# ============================================
# WebSocket Configuration
# ============================================
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MESSAGE_TTL=3600

# ============================================
# File Upload Configuration
# ============================================
MAX_UPLOAD_SIZE=104857600
ALLOWED_UPLOAD_EXTENSIONS=.log,.txt,.json,.csv,.zip
UPLOAD_TEMP_DIR=/tmp/uploads

# ============================================
# API Configuration
# ============================================
API_RATE_LIMIT=100/hour
API_THROTTLE_ANON=10/min
API_THROTTLE_USER=100/min
API_PAGE_SIZE=50
API_MAX_PAGE_SIZE=1000

# ============================================
# Docker Resource Limits
# ============================================
# Backend
BACKEND_CPU_LIMIT=2
BACKEND_MEM_LIMIT=2048m
BACKEND_MEM_RESERVATION=1024m

# Frontend
FRONTEND_CPU_LIMIT=1
FRONTEND_MEM_LIMIT=1024m
FRONTEND_MEM_RESERVATION=512m

# Databases
POSTGRES_MEM_LIMIT=2048m
MONGODB_MEM_LIMIT=2048m
REDIS_MEM_LIMIT=512m
ELASTICSEARCH_MEM_LIMIT=4096m

# ============================================
# Health Check Configuration
# ============================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# ============================================
# Network Configuration
# ============================================
NETWORK_SUBNET_FRONTEND=172.20.0.0/24
NETWORK_SUBNET_BACKEND=172.21.0.0/24
NETWORK_SUBNET_DATABASE=172.22.0.0/24
NETWORK_SUBNET_ELK=172.23.0.0/24
NETWORK_SUBNET_MONITORING=172.24.0.0/24

# ============================================
# Time Zone Configuration
# ============================================
TZ=UTC
DJANGO_TIMEZONE=UTC
