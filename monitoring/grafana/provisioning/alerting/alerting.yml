# Grafana Alerting Provisioning
# Contact points and notification policies

apiVersion: 1

contactPoints:
  # Default contact point
  - orgId: 1
    name: default-email
    receivers:
      - uid: email-receiver
        type: email
        settings:
          addresses: ops@yourdomain.com
          singleEmail: true
        disableResolveMessage: false

  # Slack notification (disabled until SLACK_BOT_TOKEN is configured)
  # - orgId: 1
  #   name: slack-alerts
  #   receivers:
  #     - uid: slack-receiver
  #       type: slack
  #       settings:
  #         recipient: '#monitoring-alerts'
  #         token: ${SLACK_BOT_TOKEN}
  #         username: Grafana Alerts
  #         icon_emoji: ':chart_with_upwards_trend:'
  #         mentionChannel: 'here'
  #       disableResolveMessage: false

  # Critical alerts (PagerDuty) - disabled until PAGERDUTY_INTEGRATION_KEY is configured
  # - orgId: 1
  #   name: pagerduty-critical
  #   receivers:
  #     - uid: pagerduty-receiver
  #       type: pagerduty
  #       settings:
  #         integrationKey: ${PAGERDUTY_INTEGRATION_KEY}
  #         severity: critical

policies:
  - orgId: 1
    receiver: default-email
    group_by:
      - grafana_folder
      - alertname
    # Routes disabled until notification integrations are configured
    # routes:
    #   # Critical alerts go to PagerDuty
    #   - receiver: pagerduty-critical
    #     object_matchers:
    #       - - severity
    #         - =
    #         - critical
    #     continue: true
    #   
    #   # All alerts go to Slack
    #   - receiver: slack-alerts
    #     object_matchers:
    #       - - alertname
    #         - =~
    #         - .*
    #     continue: true
    
    group_wait: 30s
    group_interval: 5m
    repeat_interval: 4h

muteTimes: []
