# ============================================
# DEVELOPMENT ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env for local development
# These are safe defaults for development only

# ============================================
# Environment Configuration
# ============================================
ENVIRONMENT=development
BUILD_TARGET=development
NODE_ENV=development
DEBUG=True

# ============================================
# Domain & URLs
# ============================================
DOMAIN=localhost
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0,backend

# Frontend URLs (local development)
NEXT_PUBLIC_API_URL=http://localhost:8000/api
NEXT_PUBLIC_WS_URL=ws://localhost:8000/ws
NEXT_PUBLIC_KIBANA_URL=http://localhost:5601

# ============================================
# Django Security Settings
# ============================================
# Simple key for development
SECRET_KEY=BncT77wPIhRUM9jaujSejExPvqhfKKZ4rLu9WSTtdzd2PHQvdy5YhTIo3oL7tRvPBbo

# CSRF trusted origins
CSRF_TRUSTED_ORIGINS=http://localhost:3000,http://localhost:8000,http://127.0.0.1:3000

# Session settings (relaxed for development)
SESSION_COOKIE_SECURE=False
CSRF_COOKIE_SECURE=False
SESSION_COOKIE_HTTPONLY=True
CSRF_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax
CSRF_COOKIE_SAMESITE=Lax

# Security headers (disabled for development)
SECURE_HSTS_SECONDS=0
SECURE_HSTS_INCLUDE_SUBDOMAINS=False
SECURE_HSTS_PRELOAD=False
SECURE_SSL_REDIRECT=False
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
X_FRAME_OPTIONS=SAMEORIGIN

# ============================================
# PostgreSQL Database
# ============================================
POSTGRES_DB=elk_vision_dev
POSTGRES_USER=elk_user
POSTGRES_PASSWORD=elk_password_dev
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Connection pooling
POSTGRES_MAX_CONNECTIONS=50
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=5

# ============================================
# MongoDB
# ============================================
MONGO_DB_NAME=elk_vision_dev
MONGO_USER=elk_mongo
MONGO_PASSWORD=mongo_password_dev
MONGO_HOST=mongodb
MONGO_PORT=27017

# MongoDB replica set
MONGO_REPLICA_SET=rs0
MONGO_REPLICA_SET_ENABLED=False

# ============================================
# Redis Cache & Message Broker
# ============================================
REDIS_PASSWORD=redis_password_dev
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# Redis connection URLs
REDIS_URL=redis://:redis_password_dev@redis:6379/0
CELERY_BROKER_URL=redis://:redis_password_dev@redis:6379/0
CELERY_RESULT_BACKEND=redis://:redis_password_dev@redis:6379/0

# Redis configuration
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_KEEPALIVE=True
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================
# Elasticsearch
# ============================================
ELASTICSEARCH_PASSWORD=elastic_password_dev
ELASTICSEARCH_HOST=elasticsearch:9200
ELASTICSEARCH_USER=elastic
ELASTICSEARCH_SCHEME=http

# Cluster settings
ELASTICSEARCH_CLUSTER_NAME=elk-dev-cluster
ELASTICSEARCH_NODE_NAME=dev-node-1

# Memory settings (smaller for development)
ES_JAVA_OPTS=-Xms1g -Xmx1g

# Security
ELASTIC_SECURITY_ENABLED=false
ELASTICSEARCH_SSL_ENABLED=false

# ============================================
# Logstash
# ============================================
LOGSTASH_HOST=logstash
LOGSTASH_PORT=5000
LS_JAVA_OPTS=-Xms256m -Xmx512m

# ============================================
# Kibana
# ============================================
KIBANA_PASSWORD=kibana_password_dev
KIBANA_ENCRYPTION_KEY=dev-encryption-key-32-chars-long
KIBANA_HOST=kibana
KIBANA_PORT=5601

# ============================================
# Celery Configuration
# ============================================
CELERY_WORKER_CONCURRENCY=2
CELERY_WORKER_MAX_TASKS_PER_CHILD=100
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240
CELERY_BROKER_CONNECTION_RETRY_ON_STARTUP=True

# ============================================
# Email Configuration (Console backend for dev)
# ============================================
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=localhost
EMAIL_PORT=1025
EMAIL_USE_TLS=False
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=
DEFAULT_FROM_EMAIL=noreply@localhost
SERVER_EMAIL=errors@localhost

# ============================================
# AWS Configuration (disabled in development)
# ============================================
USE_S3=False
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_STORAGE_BUCKET_NAME=
AWS_S3_REGION_NAME=
AWS_S3_CUSTOM_DOMAIN=
AWS_DEFAULT_ACL=

# ============================================
# Monitoring & Alerting
# ============================================
# Prometheus
PROMETHEUS_RETENTION_DAYS=7
PROMETHEUS_RETENTION_SIZE=1GB

# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_SECRET_KEY=dev-secret-key

# Alertmanager (disabled in dev)
SLACK_WEBHOOK_URL=
SLACK_BOT_TOKEN=
SLACK_CHANNEL=

SMTP_HOST=localhost:1025
SMTP_USER=
SMTP_PASSWORD=

PAGERDUTY_SERVICE_KEY=
PAGERDUTY_INTEGRATION_KEY=

# Sentry (disabled in development)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0

# ============================================
# SSL/TLS Configuration (not used in dev)
# ============================================
SSL_CERTIFICATE_EMAIL=
CERTBOT_EMAIL=
SSL_CERT_PATH=
SSL_KEY_PATH=

# ============================================
# Rate Limiting (disabled for development)
# ============================================
RATE_LIMIT_ENABLED=False
RATE_LIMIT_PER_MINUTE=1000
RATE_LIMIT_PER_HOUR=10000
RATE_LIMIT_PER_DAY=100000

# ============================================
# CORS Configuration (allow all for dev)
# ============================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000,http://127.0.0.1:3000
CORS_ALLOW_CREDENTIALS=True

# ============================================
# Backup Configuration
# ============================================
BACKUP_ENABLED=False
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=
BACKUP_SCHEDULE=

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=DEBUG
DJANGO_LOG_LEVEL=DEBUG
CELERY_LOG_LEVEL=INFO
ELASTICSEARCH_LOG_LEVEL=INFO

LOG_FILE_PATH=/var/log/elk-vision/app.log
ERROR_LOG_PATH=/var/log/elk-vision/error.log

# ============================================
# Application Versioning
# ============================================
APP_VERSION=dev
GIT_COMMIT_SHA=local

# ============================================
# Feature Flags (all enabled for development)
# ============================================
ENABLE_API_DOCS=True
ENABLE_DEBUG_TOOLBAR=True
ENABLE_SILK_PROFILER=True
ENABLE_REGISTRATION=True
ENABLE_PASSWORD_RESET=True

# ============================================
# JWT Configuration
# ============================================
JWT_SECRET_KEY=dev-jwt-secret-key-not-for-production
JWT_ACCESS_TOKEN_LIFETIME=3600
JWT_REFRESH_TOKEN_LIFETIME=86400
JWT_ALGORITHM=HS256

# ============================================
# WebSocket Configuration
# ============================================
WEBSOCKET_MAX_CONNECTIONS=100
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MESSAGE_TTL=3600

# ============================================
# File Upload Configuration
# ============================================
MAX_UPLOAD_SIZE=104857600
ALLOWED_UPLOAD_EXTENSIONS=.log,.txt,.json,.csv,.zip
UPLOAD_TEMP_DIR=/tmp/uploads

# ============================================
# API Configuration
# ============================================
API_RATE_LIMIT=1000/hour
API_THROTTLE_ANON=100/min
API_THROTTLE_USER=1000/min
API_PAGE_SIZE=50
API_MAX_PAGE_SIZE=1000

# ============================================
# Docker Resource Limits (relaxed for dev)
# ============================================
BACKEND_CPU_LIMIT=1
BACKEND_MEM_LIMIT=1024m
BACKEND_MEM_RESERVATION=512m

FRONTEND_CPU_LIMIT=0.5
FRONTEND_MEM_LIMIT=512m
FRONTEND_MEM_RESERVATION=256m

POSTGRES_MEM_LIMIT=1024m
MONGODB_MEM_LIMIT=1024m
REDIS_MEM_LIMIT=256m
ELASTICSEARCH_MEM_LIMIT=2048m

# ============================================
# Health Check Configuration
# ============================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# ============================================
# Network Configuration
# ============================================
NETWORK_SUBNET_FRONTEND=172.20.0.0/24
NETWORK_SUBNET_BACKEND=172.21.0.0/24
NETWORK_SUBNET_DATABASE=172.22.0.0/24
NETWORK_SUBNET_ELK=172.23.0.0/24
NETWORK_SUBNET_MONITORING=172.24.0.0/24

# ============================================
# Time Zone Configuration
# ============================================
TZ=UTC
DJANGO_TIMEZONE=UTC
